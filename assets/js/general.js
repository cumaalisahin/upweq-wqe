$(document).ready(function(){var toggle=false;$(".navbar-button").click(function(){if(toggle){$("#navbar").animate({left:"-240px"},200);toggle=false;}else{$("#navbar").animate({left:"0%"},200);toggle=true;}});});async function addLinkUI(nameDefault=""){const{value:nameReturn}=await Swal.fire({title:'İsimlendir',text:'Bağlantıyı ayırt etmenizi sağlayacak bir isim yazın:',html:'<input id="link-input" class="swal2-input" type="text" value="'+nameDefault+'">',confirmButtonText:'İlerle',cancelButtonText:'Vazgeç',showCancelButton:true,focusConfirm:false,preConfirm:()=>{return[document.getElementById('link-input').value,]},});if(!nameReturn)return;const{value:linkReturn}=await Swal.fire({title:'Bağlantı Ekle',text:'Eklemek istediğiniz *glitch* bağlantısını girin:',html:'https:// <input id="link-input" class="swal2-input" style="width:50%;" type="text"> .glitch.me',confirmButtonText:'Oluştur',cancelButtonText:'Geri',showCancelButton:true,focusConfirm:false,preConfirm:()=>{return[document.getElementById('link-input').value,]},});if(!linkReturn){addLinkUI(nameReturn[0]);return;}
$.ajax({type:"POST",url:getURL()+"/actions",data:{action:'add_link',link:linkReturn[0],linkTitle:nameReturn[0]},dataType:"json",success:function(data){if(data.state=="success"){Swal.fire('Başarılı!',data.message,'success')
loadLinks();}else{Swal.fire('Bir hata oluştu!',data.message,'error')}},error:function(errMsg){Swal.fire('Bir hata oluştu!',"İnternet bağlantınızı kontrol edin!",'error')}});}
async function editLink(l_id){const{value:editForm}=await Swal.fire({title:'Düzenle',text:"Değiştirmek için yeni değerleri girin.",html:'<input id="title-input" placeholder="Başlık" class="swal2-input">'+
'https:// <input id="link-input" class="swal2-input" style="width:50%;" type="text"> .glitch.me',focusConfirm:false,showCancelButton:true,confirmButtonText:'Düzenle',cancelButtonText:"Vazgeç",preConfirm:()=>{return[document.getElementById('title-input').value,document.getElementById('link-input').value]}});if(!editForm)return;$.ajax({type:"POST",url:getURL()+"/actions",data:{action:'edit_link',link_id:l_id,linkTitle:editForm[0],link:editForm[1]},dataType:"json",success:function(data){if(data.state=="success"){Swal.fire('Başarılı',data.message,'success');loadLinks();return;}
Swal.fire('Hata',data.message,'error');},error:function(errMsg){Swal.fire('Bir hata oluştu!',"İnternet bağlantınızı kontrol edin!",'error');}});}
function deleteLink(l_id){Swal.fire({title:'Emin misin?',text:"Bunu yaparsan, geri alamazsın.",icon:'warning',showCancelButton:true,confirmButtonText:'Evet',cancelButtonText:"Vazgeç"}).then((result)=>{if(result.isConfirmed){$.ajax({type:"POST",url:getURL()+"/actions",data:{action:'delete_link',link_id:l_id},dataType:"json",success:function(data){if(data.state=="success"){Swal.fire('Başarılı',data.message,'success');loadLinks();return;}
Swal.fire('Hata',data.message,'error');},error:function(errMsg){Swal.fire('Bir hata oluştu!',"İnternet bağlantınızı kontrol edin!",'error');}});}});}
function loadLinks(){var table=document.getElementById("link-table");table.innerHTML=`<center><div class="lds-facebook black" id="loading-table"><div></div><div></div><div></div></div></center>`;$.ajax({type:"POST",url:getURL()+"/actions",data:{action:'get_links'},dataType:"json",success:function(data){table.innerHTML=``;data.results.forEach(element=>{var row=table.insertRow(0);var cellTitle=row.insertCell(0);var cellLinks=row.insertCell(1);var cellCreated=row.insertCell(2);var cellTasks=row.insertCell(3);cellTitle.innerHTML=element["title"];cellTitle.className="link-element-title";cellLinks.innerHTML=element["link"];cellLinks.className="link-element-link";var date=new Date(element["created"]*1000);cellCreated.innerHTML=date.toISOString().slice(0,10)+" / "+date.toISOString().slice(11,19);cellCreated.className="link-element-created";cellTasks.innerHTML=`<a href="javascript:deleteLink(`+element["id"]+`)" class="link-button"><i class="fas fa-trash-alt"></i></a> <a href="javascript:editLink(`+element["id"]+`)" class="link-button"><i class="fas fa-pen"></i></a>`;cellTasks.className="link-element-tasks";});var row=table.insertRow(0);row.className="links-begin";var cellTitle=row.insertCell(0);var cellLinks=row.insertCell(1);var cellCreated=row.insertCell(2);var cellTasks=row.insertCell(3);cellTitle.innerHTML="Başlık";cellTitle.className="link-element-title";cellLinks.innerHTML="Link";cellLinks.className="link-element-link";cellCreated.innerHTML="Oluşturuldu";cellCreated.className="link-element-created";cellTasks.innerHTML="İşlemler";cellTasks.className="link-element-tasks";}});}